<template>
  <div data-name="services">
      <div class="tab tab-active" id="tab-1">

        <div id="card-sleep" class="sleeplevel-questionnaire display-none" >
            <div class="card no-margin" id="happynesslevel">
                <div id="card-content-sleep" class="h100">
                    <div class="card-question card-content card-content-padding">
                        Como tem sido a qualidade do seu sono nos últimos 7 dias?
                    </div>
                    <div class="row padding">
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="sleepLevel(0)"><img src="static/images/affective-slider/AS_unhappy.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="sleepLevel(1)"><img src="static/images/affective-slider/AS_sleepy.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="sleepLevel(2)"><img src="static/images/affective-slider/AS_wideawake.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="sleepLevel(3)"><img src="static/images/affective-slider/AS_intensity_cue.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="sleepLevel(4)"><img src="static/images/affective-slider/AS_happy.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="display-none" id="thanks-for-response-sleep">
                    <div class="card-question card-content card-content-padding">
                        Como tem sido a qualidade do seu sono nos últimos 7 dias?
                    </div>
                    <div class="row padding">
                        <div class="col-2" >
                        </div>
                        <div class="col-2" >
                        </div>
                        <div class="col-92 text-align-center" >
                            <p>Obrigado pela sua resposta :)</p>
                        </div>
                        <div class="col-2" >
                        </div>
                        <div class="col-2" >
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>


		<div id="card-food" class="foodlevel-questionnaire" >
            <div class="card no-margin" id="happynesslevel">
                <div id="card-content-food" class="h100">
                    <div class="card-question card-content card-content-padding">
                        Como tem sido a qualidade da sua alimentação nos últimos 7 dias?
                    </div>
                    <div class="row padding">
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="foodLevel(0)"><img src="static/images/affective-slider/AS_unhappy.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="foodLevel(1)"><img src="static/images/affective-slider/AS_sleepy.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="foodLevel(2)"><img src="static/images/affective-slider/AS_wideawake.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="foodLevel(3)"><img src="static/images/affective-slider/AS_intensity_cue.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="foodLevel(4)"><img src="static/images/affective-slider/AS_happy.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="display-none" id="thanks-for-response-food">
                    <div class="card-question card-content card-content-padding">
                        Como tem sido a qualidade da sua alimentação nos últimos 7 dias?
                    </div>
                    <div class="row padding">
                        <div class="col-2" >
                        </div>
                        <div class="col-2" >
                        </div>
                        <div class="col-92 text-align-center" >
                            <p>Obrigado pela sua resposta :)</p>
                        </div>
                        <div class="col-2" >
                        </div>
                        <div class="col-2" >
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>


        <div id="card-physical-activity" class="physicalactivitylevel-questionnaire" >
            <div class="card no-margin" id="happynesslevel">
                <div id="card-content-physical-activity" class="h100">
                    <div class="card-question card-content card-content-padding">
                        Quantas vezes praticou atividade física nos últimos 7 dias?
                    </div>
                    
                    <div class="row text-align-center pa-fontsize w100" >
                        <a href="#" @click="physicalActivityLevel(0)" class="w100 p-5px"><button class="button button-fill">Nenhuma</button></a>
                    </div>
                    <div class="row text-align-center pa-fontsize w100" >
                        <a href="#" @click="physicalActivityLevel(1)" class="w100 p-5px"><button class="button button-fill">1</button></a>
                    </div>
                    <div class="row text-align-center pa-fontsize w100" >
                        <a href="#" @click="physicalActivityLevel(2)" class="w100 p-5px"><button class="button button-fill">2</button></a>
                    </div>
                    <div class="row text-align-center pa-fontsize w100" >
                        <a href="#" @click="physicalActivityLevel(3)" class="w100 p-5px"><button class="button button-fill">3</button></a>
                    </div>
                    <div class="row text-align-center pa-fontsize w100" >
                        <a href="#" @click="physicalActivityLevel(4)" class="w100 p-5px"><button class="button button-fill">4</button></a>
                    </div>
                    <div class="row text-align-center pa-fontsize w100" >
                        <a href="#" @click="physicalActivityLevel(5)" class="w100 p-5px"><button class="button button-fill">5 ou mais</button></a>
                    </div>
                    
                </div>
                <div class="display-none" id="thanks-for-response-physical-activity">
                    <div class="card-question card-content card-content-padding">
                        Como tem sido a qualidade da sua alimentação nos últimos 7 dias?
                    </div>
                    <div class="row padding">
                        <div class="col-2" >
                        </div>
                        <div class="col-2" >
                        </div>
                        <div class="col-92 text-align-center" >
                            <p>Obrigado pela sua resposta :)</p>
                        </div>
                        <div class="col-2" >
                        </div>
                        <div class="col-2" >
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>


        <div class="happynesslevel-questionnaire" >
            <div class="card no-margin" id="happynesslevel">
                <div id="cardContent" class="h100">
                    <div class="card-question card-content card-content-padding">
                        Como você está se sentindo agora?
                    </div>
                    <div class="row padding">
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="happynessLevel(0)" id="unHappy"><img src="static/images/affective-slider/AS_unhappy.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="happynessLevel(1)"><img src="static/images/affective-slider/AS_sleepy.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="happynessLevel(2)"><img src="static/images/affective-slider/AS_wideawake.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="happynessLevel(3)"><img src="static/images/affective-slider/AS_intensity_cue.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                        <div class="col-20" >
                            <div>
                                <a href="#" @click="happynessLevel(4)"><img src="static/images/affective-slider/AS_happy.svg" style="width: 100%;"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="display-none" id="thanks-for-response">
                    <div class="card-question card-content card-content-padding">
                        Como você está se sentindo agora?
                    </div>
                    <div class="row padding">
                        <div class="col-2" >
                        </div>
                        <div class="col-2" >
                        </div>
                        <div class="col-92 text-align-center" >
                            <p>Obrigado pela sua resposta :)</p>
                        </div>
                        <div class="col-2" >
                        </div>
                        <div class="col-2" >
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>

        <div class="menu-grid">
            <a href="/about-more/" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/ask-for-help.png" class="menu-grid__icon">
                    <div class="item-title">Transtornos mais comuns</div>
                </div>
            </a>

            <a href="/prevention/" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/feeling-down.png" class="menu-grid__icon">
                    <div class="item-title">Principais sintomas</div>
                </div>
            </a>

            <a href="/reasons/" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/feeling-blue.png" class="menu-grid__icon">
                    <div class="item-title">Fatores responsáveis</div>
                </div>
            </a>

            <a href="/where-help/" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/know-yourself.png" class="menu-grid__icon">
                    <div class="item-title">Preconceitos e tabus</div>
                </div>
            </a>

            <a href="/health-tips/" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/nourish-your-mind.png" class="menu-grid__icon">
                    <div class="item-title">Dicas</div>
                </div>
            </a>

            <a href="/tips/sleep" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/sleep.png" class="menu-grid__icon">
                    <div class="item-title">Sono</div>
                </div>
            </a>

            <a href="/tips/feeding" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/health-food.png" class="menu-grid__icon">
                    <div class="item-title">Dicas de Alimentação</div>
                </div>
            </a>

            <a href="/tips/activity" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/exercise.png" class="menu-grid__icon">
                    <div class="item-title">Dicas de Atividade Física</div>
                </div>
            </a>

            <a href="/tips/leisure" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/leisure.png" class="menu-grid__icon">
                    <div class="item-title">Dicas de Lazer</div>
                </div>
            </a>
            
            <a href="/contact/" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/go-to-therapy.png" class="menu-grid__icon">
                    <div class="item-title">Atendimento Emergencial</div>
                </div>
            </a>
          
            <a href="/wellness-quiz/" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/quiz.png" class="menu-grid__icon">
                    <div class="item-title">Questionário de Bem-Estar</div>
                </div>
            </a>
          
            <a href="/hr/" class="menu-grid__item">
                <div class="item-inner">
                    <img src="static/images/heartbeat.png" class="menu-grid__icon">
                    <div class="item-title">Batimento Cardíaco</div>
                </div>
            </a>

          </div>
      </div>
  </div>
</template>
<script>
    
    export default {
        methods: {
            checkNeedSleepQuestionnarie: function(){
                var self = this;
                var app = self.$app;

                let sleepCard = this.$$("#card-sleep");
                let sleepHistory = app.storage.getSleepHistory();
                
                if(sleepHistory == null) {
                    sleepCard.removeClass('display-none');
                    return true;
                }

                let lastUpdateFromStorage = sleepHistory.history[sleepHistory.history.length - 1];
                let lastUpdate = new Date(lastUpdateFromStorage.created_at);
                let now = new Date();
                

                if (now.getFullYear() === lastUpdate.getFullYear() && now.getMonth() === lastUpdate.getMonth() && now.getDate() === lastUpdate.getDate()){
                    sleepCard.addClass('display-none');
                    return false;
                } else {
                    sleepCard.removeClass('display-none');
                    return true;
                }
            },
			checkNeedFoodQuestionnarie: function(){
                var self = this;
                var app = self.$app;

                let foodCard = this.$$("#card-food");
                let foodHistory = app.storage.getFoodHistory();
                
                if(foodHistory == null) {
                    foodCard.removeClass('display-none');
                    return true;
                }

                let lastUpdateFromStorage = foodHistory.history[foodHistory.history.length - 1];
                let lastUpdate = new Date(lastUpdateFromStorage.created_at);
                let now = new Date();
                

                if (now.getFullYear() === lastUpdate.getFullYear() && now.getMonth() === lastUpdate.getMonth() && now.getDate() === lastUpdate.getDate()){
                    foodCard.addClass('display-none');
                    return false;
                } else {
                    foodCard.removeClass('display-none');
                    return true;
                }
            },
            checkNeedPhysicalActivityQuestionnarie: function(){
                var self = this;
                var app = self.$app;

                let physicalActivityCard = this.$$("#card-physical-activity");
                let physicalActivityHistory = app.storage.getPhysicalActivityHistory();
                
                if(physicalActivityHistory == null) {
                    physicalActivityCard.removeClass('display-none');
                    return true;
                }

                let lastUpdateFromStorage = physicalActivityHistory.history[physicalActivityHistory.history.length - 1];
                let lastUpdate = new Date(lastUpdateFromStorage.created_at);
                let now = new Date();
                

                if (now.getFullYear() === lastUpdate.getFullYear() && now.getMonth() === lastUpdate.getMonth() && now.getDate() === lastUpdate.getDate()){
                    physicalActivityCard.addClass('display-none');
                    return false;
                } else {
                    physicalActivityCard.removeClass('display-none');
                    return true;
                }
            },
            sleepLevel: function(awnser){
                var self = this;
                var app = self.$app;
        
                let pollCard = this.$$("#card-content-sleep");
                let pollThanks = this.$$("#thanks-for-response-sleep");
                let sleepCard = this.$$("#card-sleep");

                app.storage.setSleepHistory(awnser);
                
                pollCard.addClass('display-none');
                pollThanks.removeClass('display-none');
                setTimeout(function () {
                        pollThanks.addClass('display-none');
                        pollCard.removeClass('display-none');
                        sleepCard.addClass('display-none');   
                        }, 5000);
            },
			foodLevel: function(awnser){
                var self = this;
                var app = self.$app;
        
                let pollCard = this.$$("#card-content-food");
                let pollThanks = this.$$("#thanks-for-response-food");
                let foodCard = this.$$("#card-food");

                app.storage.setFoodHistory(awnser);
                
                pollCard.addClass('display-none');
                pollThanks.removeClass('display-none');
                setTimeout(function () {
                        pollThanks.addClass('display-none');
                        pollCard.removeClass('display-none');
                        foodCard.addClass('display-none');   
                        }, 5000);
            },
            physicalActivityLevel: function(awnser){
                var self = this;
                var app = self.$app;
        
                let pollCard = this.$$("#card-content-physical-activity");
                let pollThanks = this.$$("#thanks-for-response-physical-activity");
                let physicalActivityCard = this.$$("#card-physical-activity");

                app.storage.setPhysicalActivityHistory(awnser);
                
                pollCard.addClass('display-none');
                pollThanks.removeClass('display-none');
                setTimeout(function () {
                        pollThanks.addClass('display-none');
                        pollCard.removeClass('display-none');
                        physicalActivityCard.addClass('display-none');   
                        }, 5000);
            },
            happynessLevel: function(awnser){
				var self = this;
				var app = self.$app;
		
				var pollCard = this.$$("#cardContent");
				var pollThanks = this.$$("#thanks-for-response");

				app.storage.setHappynessHistory(awnser);

				pollCard.addClass('display-none');
				pollThanks.removeClass('display-none');
				setTimeout(function () {
						pollThanks.addClass('display-none');
						pollCard.removeClass('display-none');   
						}, 30000);
            },
        },
        on: {
            tabInit: function(){
                this.checkNeedSleepQuestionnarie();
				this.checkNeedFoodQuestionnarie();
                this.checkNeedPhysicalActivityQuestionnarie();
            }
        }
    };
</script>
<style>
    .menu-grid {
        padding: 10px;
        display: grid;
        grid-template-columns: repeat(auto-fill, calc(50% - 5px));
        grid-gap: 10px;
    }

    .menu-grid__item {
        background-color: #f6f6f6;
        text-align: center;
        text-transform: uppercase;
        color: #1e2f42;
        font-weight: bold;
        padding: 10px;
    }

    .menu-grid__item.small {
        vertical-align: middle;
        font-weight: 400;
        padding: 8px;
        text-align: left;
        background-color: #dff1e0;
        font-size: 0.8em;
    }

    .menu-grid__item.small i {
        float: left;
        margin-top: 8px;
        margin-right: 10px;
        font-size: 1.8em;
    }

    .menu-grid__icon {
        height: 55px;
    }

    .card-question {
      font-size: 16px;
      font-weight: 500;
      text-align: justify;
    }

    .sleeplevel-questionnaire {
        padding: 10px;
    }
    
	.foodlevel-questionnaire {
        padding: 10px;
    }

    .physicalactivitylevel-questionnaire {
        padding: 10px;
    }
    .pa-fontsize{
        font-size:x-large;
    }

    .happynesslevel-questionnaire {
        padding: 10px;
    }

    .h100 {
        height: 100%;
    }

    .w100 {
        width: 100%;
    }

    .p-5px {
        padding: 5px;
    }

</style>
